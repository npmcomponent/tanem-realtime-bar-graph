(function(){function require(path,parent,orig){var resolved=require.resolve(path);if(null==resolved){orig=orig||path;parent=parent||"root";var err=new Error('Failed to require "'+orig+'" from "'+parent+'"');err.path=orig;err.parent=parent;err.require=true;throw err}var module=require.modules[resolved];if(!module._resolving&&!module.exports){var mod={};mod.exports={};mod.client=mod.component=true;module._resolving=true;module.call(this,mod.exports,require.relative(resolved),mod);delete module._resolving;module.exports=mod.exports}return module.exports}require.modules={};require.aliases={};require.resolve=function(path){if(path.charAt(0)==="/")path=path.slice(1);var paths=[path,path+".js",path+".json",path+"/index.js",path+"/index.json"];for(var i=0;i<paths.length;i++){var path=paths[i];if(require.modules.hasOwnProperty(path))return path;if(require.aliases.hasOwnProperty(path))return require.aliases[path]}};require.normalize=function(curr,path){var segs=[];if("."!=path.charAt(0))return path;curr=curr.split("/");path=path.split("/");for(var i=0;i<path.length;++i){if(".."==path[i]){curr.pop()}else if("."!=path[i]&&""!=path[i]){segs.push(path[i])}}return curr.concat(segs).join("/")};require.register=function(path,definition){require.modules[path]=definition};require.alias=function(from,to){if(!require.modules.hasOwnProperty(from)){throw new Error('Failed to alias "'+from+'", it does not exist')}require.aliases[to]=from};require.relative=function(parent){var p=require.normalize(parent,"..");function lastIndexOf(arr,obj){var i=arr.length;while(i--){if(arr[i]===obj)return i}return-1}function localRequire(path){var resolved=localRequire.resolve(path);return require(resolved,parent,path)}localRequire.resolve=function(path){var c=path.charAt(0);if("/"==c)return path.slice(1);if("."==c)return require.normalize(p,path);var segs=parent.split("/");var i=lastIndexOf(segs,"deps")+1;if(!i)i=0;path=segs.slice(0,i+1).join("/")+"/deps/"+path;return path};localRequire.exists=function(path){return require.modules.hasOwnProperty(localRequire.resolve(path))};return localRequire};require.register("component-raf/index.js",function(exports,require,module){exports=module.exports=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||fallback;var prev=(new Date).getTime();function fallback(fn){var curr=(new Date).getTime();var ms=Math.max(0,16-(curr-prev));var req=setTimeout(fn,ms);prev=curr;return req}var cancel=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;exports.cancel=function(id){cancel.call(window,id)}});require.register("KenanY-isInteger/index.js",function(exports,require,module){module.exports=function(x){return x===Math.round(x)}});require.register("component-bind/index.js",function(exports,require,module){var slice=[].slice;module.exports=function(obj,fn){if("string"==typeof fn)fn=obj[fn];if("function"!=typeof fn)throw new Error("bind() requires a function");var args=slice.call(arguments,2);return function(){return fn.apply(obj,args.concat(slice.call(arguments)))}}});require.register("component-domify/index.js",function(exports,require,module){module.exports=parse;var map={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:[0,"",""]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"];map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"];map.text=map.circle=map.ellipse=map.line=map.path=map.polygon=map.polyline=map.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function parse(html){if("string"!=typeof html)throw new TypeError("String expected");html=html.replace(/^\s+|\s+$/g,"");var m=/<([\w:]+)/.exec(html);if(!m)return document.createTextNode(html);var tag=m[1];if(tag=="body"){var el=document.createElement("html");el.innerHTML=html;return el.removeChild(el.lastChild)}var wrap=map[tag]||map._default;var depth=wrap[0];var prefix=wrap[1];var suffix=wrap[2];var el=document.createElement("div");el.innerHTML=prefix+html+suffix;while(depth--)el=el.lastChild;if(el.firstChild==el.lastChild){return el.removeChild(el.firstChild)}var fragment=document.createDocumentFragment();while(el.firstChild){fragment.appendChild(el.removeChild(el.firstChild))}return fragment}});require.register("component-autoscale-canvas/index.js",function(exports,require,module){module.exports=function(canvas){var ctx=canvas.getContext("2d");var ratio=window.devicePixelRatio||1;if(1!=ratio){canvas.style.width=canvas.width+"px";canvas.style.height=canvas.height+"px";canvas.width*=ratio;canvas.height*=ratio;ctx.scale(ratio,ratio)}return canvas}});require.register("realtime-bar-graph/index.js",function(exports,require,module){"use strict";var raf=require("raf");var bind=require("bind");var domify=require("domify");var template=require("./template");var autoscale=require("autoscale-canvas");module.exports=RealtimeBarGraph;function RealtimeBarGraph(){this._barSpacing=2;this._barWidth=4;this._gutter=40;this._width=780;this._height=280;this._backgroundBarColour="#cdcdcd";this._historyBarColour="#00cccc";this._axesFont="13px sans-serif";this._frameRate=20;this.buffer=0;this.el=domify(template);this.animate=bind(this,"animate");this.backgroundBarCb=bind(this,"backgroundBarCb");this.historyBarCb=bind(this,"historyBarCb")}RealtimeBarGraph.prototype.barSpacing=function(barSpacing){this._barSpacing=barSpacing;return this};RealtimeBarGraph.prototype.barWidth=function(barWidth){this._barWidth=barWidth;return this};RealtimeBarGraph.prototype.gutter=function(gutter){this._gutter=gutter;return this};RealtimeBarGraph.prototype.width=function(width){this._width=width;return this};RealtimeBarGraph.prototype.height=function(height){this._height=height;return this};RealtimeBarGraph.prototype.backgroundBarColour=function(backgroundBarColour){this._backgroundBarColour=backgroundBarColour;return this};RealtimeBarGraph.prototype.historyBarColour=function(historyBarColour){this._historyBarColour=historyBarColour;return this};RealtimeBarGraph.prototype.axesFont=function(axesFont){this._axesFont=axesFont;return this};RealtimeBarGraph.prototype.frameRate=function(frameRate){this._frameRate=frameRate;return this};RealtimeBarGraph.prototype.createHistoryArray=function(){this.history=[];var i=0,j=this._width/(this._barSpacing+this._barWidth);for(;i<j;i++)this.history[i]=0};RealtimeBarGraph.prototype.drawBackground=function(){this.drawBars(this.backgroundBarCb)};RealtimeBarGraph.prototype.backgroundBarCb=function(xPos){this.bgCtx.fillRect(xPos,this._gutter,this._barWidth,this._height-this._gutter*2)};RealtimeBarGraph.prototype.initialiseBackgroundCanvas=function(){var canvas=this.el.querySelector(".rtbg-background");canvas.width=this._width;canvas.height=this._height;autoscale(canvas);this.bgCtx=canvas.getContext("2d");this.bgCtx.fillStyle=this._backgroundBarColour};RealtimeBarGraph.prototype.initialiseHistoryCanvas=function(){var canvas=this.el.querySelector(".rtbg-history");canvas.width=this._width;canvas.height=this._height;autoscale(canvas);this.historyCtx=canvas.getContext("2d");this.historyCtx.fillStyle=this._historyBarColour};RealtimeBarGraph.prototype.start=function(){this.createHistoryArray();this.initialiseBackgroundCanvas();this.initialiseHistoryCanvas();this.drawBackground();this.animateInterval=1e3/this._frameRate;this.rafId=raf(this.animate)};RealtimeBarGraph.prototype.animate=function(){this.rafId=raf(this.animate);var now=Date.now();this.animateStart=this.animateStart||now;var animateDelta=now-this.animateStart;if(animateDelta>this.animateInterval){this.animateStart=now-animateDelta%this.animateInterval;this.processHistoryFrame()}};RealtimeBarGraph.prototype.processHistoryFrame=function(){for(var i=0,j=this.history.length-1;i<j;i++){this.history[i]=this.history[i+1]}this.history[this.history.length-1]=this.buffer;this.drawHistory();this.buffer=0};RealtimeBarGraph.prototype.drawHistory=function(){var maxHits=Math.max.apply(null,this.history);if(!this.maxAxesPoint||maxHits>=this.maxAxesPoint)this.drawAxes(maxHits);this.historyMultiplier=(this._height-this._gutter*2)/this.maxAxesPoint;this.historyCtx.clearRect(0,0,this._width,this._height);this.historyStartIndex=this.history.length-1;this.drawBars(this.historyBarCb)};RealtimeBarGraph.prototype.historyBarCb=function(xPos){var hits=this.history[this.historyStartIndex--]*this.historyMultiplier;this.historyCtx.fillRect(xPos,this._height-this._gutter-hits,this._barWidth,hits)};RealtimeBarGraph.prototype.drawBars=function(cb){var xPos=this._width-this._gutter-this._barWidth,start=this._gutter;for(;xPos>=start;xPos-=this._barSpacing+this._barWidth)cb(xPos)};RealtimeBarGraph.prototype.drawAxes=function(maxHits){maxHits=maxHits||1;var points=[0,maxHits,maxHits*2,maxHits*3,maxHits*4];this.maxAxesPoint=points[4];this.bgCtx.font=this._axesFont;this.drawLeftYAxis(points);this.drawRightYAxis(points)};RealtimeBarGraph.prototype.drawLeftYAxis=function(points){var xPos=this._gutter-5;var drawingAreaHeight=this._height-this._gutter*2;this.bgCtx.clearRect(0,0,xPos,this._height);this.bgCtx.textAlign="right";this.bgCtx.textBaseline="middle";this.bgCtx.fillText(points[4],xPos,this._gutter);this.bgCtx.fillText(points[3],xPos,this._gutter+drawingAreaHeight/4);this.bgCtx.fillText(points[2],xPos,this._gutter+drawingAreaHeight/2);this.bgCtx.fillText(points[1],xPos,this._height-this._gutter-drawingAreaHeight/4);this.bgCtx.fillText(points[0],xPos,this._height-this._gutter)};RealtimeBarGraph.prototype.drawRightYAxis=function(points){var xPos=this._width-this._gutter+5;var drawingAreaHeight=this._height-this._gutter*2;this.bgCtx.clearRect(xPos,0,this._width-xPos,this._height);this.bgCtx.textAlign="left";this.bgCtx.textBaseline="middle";this.bgCtx.fillText(points[4],xPos,this._gutter);this.bgCtx.fillText(points[3],xPos,this._gutter+drawingAreaHeight/4);this.bgCtx.fillText(points[2],xPos,this._gutter+drawingAreaHeight/2);this.bgCtx.fillText(points[1],xPos,this._height-this._gutter-drawingAreaHeight/4);this.bgCtx.fillText(points[0],xPos,this._height-this._gutter)};RealtimeBarGraph.prototype.addHit=function(){this.buffer++}});require.register("realtime-bar-graph/template.js",function(exports,require,module){module.exports='<div class="rtbg">\n  <canvas class="rtbg-background"></canvas>\n  <canvas class="rtbg-history"></canvas>\n</div>'});require.alias("component-raf/index.js","realtime-bar-graph/deps/raf/index.js");require.alias("component-raf/index.js","raf/index.js");require.alias("KenanY-isInteger/index.js","realtime-bar-graph/deps/isInteger/index.js");require.alias("KenanY-isInteger/index.js","isInteger/index.js");require.alias("component-bind/index.js","realtime-bar-graph/deps/bind/index.js");require.alias("component-bind/index.js","bind/index.js");require.alias("component-domify/index.js","realtime-bar-graph/deps/domify/index.js");require.alias("component-domify/index.js","domify/index.js");require.alias("component-autoscale-canvas/index.js","realtime-bar-graph/deps/autoscale-canvas/index.js");require.alias("component-autoscale-canvas/index.js","autoscale-canvas/index.js");require.alias("realtime-bar-graph/index.js","realtime-bar-graph/index.js");if(typeof exports=="object"){module.exports=require("realtime-bar-graph")}else if(typeof define=="function"&&define.amd){define(function(){return require("realtime-bar-graph")})}else{this["RealtimeBarGraph"]=require("realtime-bar-graph")}})();